(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){"use strict";function n(){return{type:"LOG_CLEAR"}}function r(e){return{type:"LOG",payload:{type:"default",text:e}}}function o(e){return{type:"LOG",payload:{type:"info",text:e}}}function c(e){return{type:"LOG",payload:{type:"success",text:e}}}function i(e){return{type:"LOG",payload:{type:"warning",text:e}}}function l(e){return{type:"LOG",payload:{type:"danger",text:e}}}a.d(t,"a",function(){return n}),a.d(t,"d",function(){return r}),a.d(t,"c",function(){return o}),a.d(t,"e",function(){return c}),a.d(t,"f",function(){return i}),a.d(t,"b",function(){return l})},200:function(e,t,a){"use strict";(function(e){var n=a(9),r=a(50),o=a.n(r),c=a(59),i=a(10),l=a.n(i),s=a(51),u=a(17),p={app:{},tabs:{byId:{}},panels:{byId:{}},widgets:{byId:{}}};t.a=function(t){return function(a){return function(r){switch(r.type){case"APP_LOAD":var i=t.getState().app.config.api;return void o.a.get(i+"/file/persistent/alacarte.json").then(function(e){t.dispatch({type:"CONFIG_IMPORT",payload:e.data}),t.dispatch(u.e("Config loaded from persistent storage"))}).catch(function(e){o.a.get(i+"/file/streaming/alacarte.json").then(function(e){t.dispatch({type:"CONFIG_IMPORT",payload:e.data}),t.dispatch(u.e("Config loaded from streaming assets"))}).catch(function(e){t.dispatch(u.f("Failed to fetch a config file from the game"))})});case"APP_SAVE":var d=Object(n.a)({},t.getState()),m=d.app.config.api;delete d.output,d.app=l.a.pick(d.app,"settings");var h=JSON.stringify(d);return void o.a.post(m+"/file/persistent/alacarte.json",h).then(function(e){return t.dispatch(u.e("Config saved to persistent data"))}).catch(function(e){return t.dispatch(u.b("Failed to save config: "+e.toString()))});case"APP_DELETE":return e.localStorage.removeItem("unium"),t.dispatch({type:"CONFIG_IMPORT",payload:p}),void t.dispatch(u.e("Config removed"));case"LOG":var f=r.payload,g=f.type,y=f.text;switch(g){case"info":c.b.info(y);break;case"success":c.b.success(y);break;case"warning":c.b.warn(y);break;case"danger":c.b.error(y)}break;case"CON_CONNECTED":r.payload?(t.dispatch(u.d("Connected")),t.dispatch(s.c("debug","/bind/events.debug"))):t.dispatch(u.d("Disconnected"));break;case"SOCK_DEBUG":var b=r.payload;"info"in b?t.dispatch(u.c("Debug messages bound")):"error"in b?t.dispatch(u.b(b.error)):t.dispatch(u.d(b.data.message))}return a(r)}}}}).call(this,a(37))},206:function(e,t,a){e.exports=a(440)},214:function(e,t,a){},440:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),c=a.n(o),i=(a(211),a(212),a(213),a(214),a(6)),l=a(7),s=a(13),u=a(12),p=a(14),d=a(26),m=a(59),h=a(9),f=a(22),g=a.n(f),y=a(10),b=a.n(y);function E(e,t,a,n){return{type:"APP_DAILOG_SHOW",payload:{modal:"confirm",title:e,question:t,callback:a,data:n}}}function v(e,t){return{type:"APP_DAILOG_SHOW",payload:{modal:"addWidget",callback:e,widget:t}}}function O(e){return{type:"WIDGET_CREATE",payload:e}}var C=a(451),j=a(204),k=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onAddPanelConfirm=function(e){var t,n=a.props,r=n.dispatch,o=n.panels,c=n.tabs.state.curTab,i=b.a.map(b.a.keys(o.byId),function(e){return parseInt(e)}),l=0===i.length?1:b.a.max(i)+1,s=Object(h.a)({},e,{id:l,tab:c});r((t=s,{type:"PANEL_CREATE",payload:Object(h.a)({},t,{tab:parseInt(t.tab)})}))},a.onScreenshot=function(){return a.props.dispatch({type:"APP_DAILOG_SHOW",payload:{modal:"screenshot"}})},a.onAddPanel=function(){return a.props.dispatch({type:"APP_DAILOG_SHOW",payload:{modal:"addPanel",callback:a.onAddPanelConfirm}})},a.onSave=function(){return a.props.dispatch({type:"APP_SAVE"})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.tabs.state.curTab;return r.a.createElement(C.a,{bg:"light",expand:"lg"},r.a.createElement(C.a.Brand,null,"Unium: \xc0 La Carte"),r.a.createElement(C.a.Toggle,null),r.a.createElement(C.a.Collapse,null,r.a.createElement(j.a,{className:"justify-content-end"},r.a.createElement(j.a.Link,{eventKey:3,onClick:this.onSave},r.a.createElement(g.a,{name:"floppy-o"})),r.a.createElement(j.a.Link,{eventKey:3,onClick:this.onScreenshot},r.a.createElement(g.a,{name:"camera"})),-1!==e&&r.a.createElement(j.a.Link,{eventKey:4,onClick:this.onAddPanel},r.a.createElement(g.a,{name:"plus"})))))}}]),t}(r.a.Component),w=Object(d.b)(function(e,t){return{panels:e.panels,tabs:e.tabs}})(k),T=a(447),S=a(453),I=a(128),N=a(72),A=a(203),P=a(50),_=a.n(P),x={WIDGET:"widget",DARK_COLOURS:{"#b80000":!0,"#db3e00":!0,"#fccb00":!0,"#008b02":!0,"#006b76":!0,"#1273de":!0,"#004dcf":!0,"#5300eb":!0},Fetch:function(e,t){var a=e.startsWith("http")?e:t.api+e;return _.a.get(a)}},D=a(192),L=a(17),G=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onClick=function(){var e=a.props,t=e.widget,n=e.dispatch,r=e.appConfig;"query"in t?x.Fetch(t.query,r).then(function(e){"log"in t&&t.log&&n(L.d("["+t.name+"]"+JSON.stringify(e.data,null,2))),"notify"in t&&t.notify&&n(L.e(t.name+" Success"))}).catch(function(e){n(L.b(e.toString()))}):n(L.f("Widget '"+t.name+"'has no query"))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.widget;return r.a.createElement(D.a,{variant:"default",className:"acWidget",style:{backgroundColor:e.colour,color:e.textColour},block:!0,onClick:this.onClick},e.name)}}]),t}(r.a.Component),W=a(442),R=a(452),B=a(443),M=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).setObject=function(e,t){var n=a.props.widget;null!=t&&(e="Include"===n.options.type?b.a.pickBy(e,function(e,a){return a in t}):b.a.omitBy(e,function(e,a){return a in t})),a.setState({data:e,headers:null})},a.processData=function(e){var t=a.props.widget,n=null;if(""!==t.options.filter){var r=t.options.filter.split(/\s*,\s*/);n=b.a.zipObject(r,b.a.map(r,function(){return!0}))}if(b.a.isArray(e)){if(1===e.length)return void a.setObject(e[0],n);if(!1===b.a.isObject(e[0])){var o=b.a.map(e,function(e,t){return t});return void a.setState({data:b.a.zipObject(o,e)})}var c=[];if(null===n)c=b.a.keys(e[0]);else{var i="Include"===t.options.type;c=b.a.keys(n),e=b.a.map(e,function(e,t){return i?b.a.pickBy(e,function(e,t){return t in n}):b.a.omitBy(e,function(e,t){return t in n})})}a.setState({headers:c,data:e})}else b.a.isObject(e)?a.setObject(e,n):a.setState({data:{0:JSON.stringify(e)}})},a.fetchData=function(){var e=a.props,t=e.widget,n=e.dispatch,r=e.appConfig;"query"in t?x.Fetch(t.query,r).then(function(e){"log"in t&&t.log&&n(L.d("["+t.name+"]"+JSON.stringify(e.data,null,2))),"notify"in t&&t.notify&&n(L.e(t.name+" Success")),a.processData(e.data)}).catch(function(e){n(L.b(e.toString())),a.setState({error:e.toString(),data:null})}):n(L.f("Widget '"+t.name+"'has no query"))},a.renderTable=function(){if(a.state.headers){var e=a.state.headers;return r.a.createElement(W.a,{responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,b.a.map(e,function(e,t){return r.a.createElement("th",{key:t},e)}))),r.a.createElement("tbody",null,b.a.map(a.state.data,function(t,a){return r.a.createElement("tr",{key:a},b.a.map(e,function(e,a){return r.a.createElement("td",{key:a},b.a.isString(t[e])?t[e]:JSON.stringify(t[e]))}))})))}return r.a.createElement(W.a,{responsive:!0},r.a.createElement("tbody",null,b.a.map(a.state.data,function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t),r.a.createElement("td",null,b.a.isString(e)?e:JSON.stringify(e)))})))},a.state={error:null,data:null,headers:null},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.widget;!e.isEditing&&t.options.fetchOnStartup&&this.fetchData()}},{key:"render",value:function(){var e=this.props,t=e.widget,a=e.isEditing;return r.a.createElement(R.a,null,r.a.createElement(R.a.Header,{style:{backgroundColor:t.colour,color:t.textColour}},t.name,!a&&r.a.createElement("div",{className:"pull-right"},r.a.createElement(g.a,{name:"refresh",onClick:this.fetchData}))),r.a.createElement(R.a.Body,null,null!=this.state.error&&r.a.createElement(B.a,{variant:"danger"},"Failed to fetch data",r.a.createElement("br",null),this.state.error),null===this.state.error&&null===this.state.data&&r.a.createElement(B.a,{variant:"info"},"Data not fetched yet"),null!=this.state.data&&this.renderTable()))}}]),t}(r.a.Component),F=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onClick=function(){var e=a.props,t=e.widget,n=e.dispatch,r=e.appConfig;if("query"in t){var o=t.query.startsWith("http")?t.query:r.api+t.query;window.open(o,"_blank").focus()}else n(L.f("Widget '"+t.name+"'has no query"))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.widget,a=e.isEditing;return r.a.createElement(D.a,{variant:"default",className:"acWidget",style:{backgroundColor:t.colour,color:t.textColour},block:!0,onClick:this.onClick},t.name,!a&&r.a.createElement("div",{className:"pull-right"},r.a.createElement(g.a,{name:"external-link"})))}}]),t}(r.a.Component),q=a(449),H=a(444),K=a(193),U=a(445),V=a(446),J=a(97),Q={filter:"",type:"Include",fetchOnStartup:!0},z=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onChangeFilter=function(e){return a.setState({filter:e.target.value})},a.onChangeFilterType=function(e){return a.setState({type:e})},a.onChangeFetch=function(e){return a.setState({fetchOnStartup:e.target.checked})};var c=a.props.options;return a.state=Object(h.a)({},Q,c),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(q.a.Group,{as:H.a,controlId:"formFilter"},r.a.createElement(q.a.Label,{column:!0,sm:"2"},"Filter"),r.a.createElement(K.a,{sm:10},r.a.createElement(U.a,null,r.a.createElement(q.a.Control,{type:"text",value:this.state.filter,onChange:this.onChangeFilter,autoFocus:!0}),r.a.createElement(V.a,{componentClass:U.a.Button,id:"formFilterType",title:this.state.type},r.a.createElement(J.a.Item,{key:"1",onSelect:function(){return e.onChangeFilterType("Include")}},"Include"),r.a.createElement(J.a.Item,{key:"2",onSelect:function(){return e.onChangeFilterType("Exclude")}},"Exclude"))),r.a.createElement(q.a.Text,{className:"text-muted"},"Comma separated list of key names (or leave blank to ignore)"))),r.a.createElement(q.a.Group,null,r.a.createElement(K.a,{sm:{offset:2,span:10}},r.a.createElement(q.a.Check,{checked:this.state.fetchOnStartup,onChange:this.onChangeFetch,label:"Fetch on start up"}))))}}]),t}(r.a.Component),Y={button:G,link:F,table:M},X={table:z},Z={hover:function(e,t,a){var n=t.getItem().index,r=e.index;if(n!==r){var c=Object(o.findDOMNode)(a).getBoundingClientRect(),i=(c.bottom-c.top)/2,l=t.getClientOffset().y-c.top;n<r&&l<i||n>r&&l>i||(console.log(),e.moveWidget(n,r),t.getItem().index=r)}}},$=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onEditWidgetConfirm=function(e){a.props.dispatch(O(e))},a.onEditWidget=function(e){e.stopPropagation();var t=a.props,n=t.dispatch,r=t.id,o=t.widgets.byId[r];n(v(a.onEditWidgetConfirm,o))},a.onRemoveWidget=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation();var t=a.props,n=t.dispatch,r=t.id,o=t.widgets.byId[r];n(E("Remove Widget","Are you sure you want to remove '"+o.name+"'",function(){return n((e=o.id,t=o.panel,{type:"WIDGET_REMOVE",payload:{id:e,panel:t}}));var e,t}))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isEditing,a=e.widget,n=Y[a.type.toLowerCase()],o=r.a.createElement(n,{widget:a,dispatch:this.props.dispatch,appConfig:this.props.appConfig,isEditing:t});if(!t)return o;var c=this.props,i=c.connectDragSource,l=c.connectDropTarget,s={paddingBottom:"0px",marginBottom:"5px",opacity:c.isDragging?0:1,position:"relative"};return i(l(r.a.createElement("div",{style:s,onMouseDown:function(e){e.stopPropagation()}},o,r.a.createElement("div",{className:"acEdit",style:{color:a.textColour}},r.a.createElement(g.a,{className:"acPanelIcon",name:"pencil",onClick:this.onEditWidget}),"\xa0",r.a.createElement(g.a,{className:"acPanelIcon",name:"times",onClick:this.onRemoveWidget})))))}}]),t}(r.a.Component),ee=Object(N.d)(x.WIDGET,Z,function(e){return{connectDropTarget:e.dropTarget()}})($),te=Object(N.c)(x.WIDGET,{beginDrag:function(e){return{id:e.id,index:e.index}}},function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(ee),ae=Object(d.b)(function(e,t){return{widgets:e.widgets}})(te),ne=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onRemovePanel=function(){var e=a.props,t=e.panel,n=e.dispatch;n(E("Remove Panel","Are you sure you want to remove '"+t.name+"'",function(){return n({type:"PANEL_REMOVE",payload:{id:t.id}})}))},a.onAddWidgetConfirm=function(e){var t=a.props,n=t.widgets,r=t.panel,o=t.dispatch,c=b.a.map(b.a.keys(n.byId),function(e){return parseInt(e)}),i=0===c.length?1:b.a.max(c)+1;o(O(Object(h.a)({},e,{id:i,panel:r.id,tab:r.tab})))},a.onAddWidget=function(){a.props.dispatch(v(a.onAddWidgetConfirm))},a.onToggleLock=function(){var e=a.props,t=e.panel,n=e.isEditing;(0,e.dispatch)({type:"APP_PANEL_STATE",payload:{edit:n?0:t.id}})},a.moveWidget=function(e,t){var n=a.props,r=n.panel;(0,n.dispatch)(function(e,t,a){return{type:"WIDGET_MOVE",payload:{id:e,dragIndex:t,hoverIndex:a}}}(r.id,e,t))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this,a=this.props,n=a.widgets,o=a.app,c=a.panel,i=a.isEditing;e=i?r.a.createElement("span",null,r.a.createElement(g.a,{className:"acPanelIcon",name:"plus",onClick:this.onAddWidget})," \xa0",r.a.createElement(g.a,{className:"acPanelIcon",name:"trash-o",onClick:this.onRemovePanel})," \xa0",r.a.createElement(g.a,{className:"acPanelIcon",name:"unlock",onClick:this.onToggleLock})):r.a.createElement(g.a,{className:"acPanelIcon",name:"lock",onClick:this.onToggleLock});var l=c.widgets.map(function(e){return n.byId[e]});return r.a.createElement(N.b,{backend:A.a},r.a.createElement("div",{className:"acPanel card"},r.a.createElement("div",{className:"card-header card-title",style:{backgroundColor:c.colour,color:c.textColour}},c.name,r.a.createElement("div",{className:"pull-right"},e),"s"),r.a.createElement("div",{className:"card-body"},l.map(function(e,a){return r.a.createElement(ae,{key:"wid".concat(e.id),id:e.id,index:a,appConfig:o.config,widget:e,isEditing:i,moveWidget:t.moveWidget})}))))}}]),t}(r.a.Component),re=Object(d.b)(function(e,t){return{widgets:e.widgets,app:e.app}})(ne),oe=(a(262),a(263),Object(I.WidthProvider)(I.Responsive)),ce=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onLayoutChange=function(e,t){var n=a.props,r=n.tabId;(0,n.dispatch)(function(e,t){return{type:"TAB_LAYOUT",payload:{id:e,layout:t}}}(r,t))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.panels,a=e.tabId,n=e.layout,o=parseInt(a),c="edit"in t.state?t.state.edit:0,i=b.a.filter(t.byId,function(e){return e.tab===o});return r.a.createElement(oe,Object.assign({layouts:n,onLayoutChange:this.onLayoutChange},this.props),b.a.map(i,function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(re,{panel:e,isEditing:e.id===c}))}))}}]),t}(r.a.PureComponent);ce.defaultProps={className:"layout",items:1,rowHeight:150,breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:6,md:4,sm:2,xs:1,xxs:1}};var ie=Object(d.b)(function(e,t){return{panels:e.panels}})(ce),le=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).onRemoveTab=function(){var e=a.props,t=e.dispatch,n=e.tabs,r=n.state.curTab,o=n.byId[r],c=Object.keys(n.byId),i=b.a.reject(c,function(e){return e==="".concat(r)}),l=i.length>0?parseInt(b.a.first(i)):-1;t(E("Remove Tab","Are you sure you want to remove '"+o.name+"'",function(e){return t(function(e,t){return{type:"TAB_REMOVE",payload:{id:e,showTab:t}}}(e,l))},r))},a.onAddTabConfirm=function(e){var t=a.props,n=t.dispatch,r=t.tabs,o=b.a.map(b.a.keys(r.byId),function(e){return parseInt(e)});n(function(e,t){return{type:"TAB_CREATE",payload:{id:e,name:t,layout:{}}}}(0===o.length?1:b.a.max(o)+1,e.name))},a.onSelectTab=function(e){var t=a.props.dispatch,n=parseInt(e,10);t(-1===n?{type:"APP_DAILOG_SHOW",payload:{modal:"addTab",callback:a.onAddTabConfirm}}:function(e){return{type:"TAB_SELECT",payload:{id:e}}}(n))},a.createTab=function(e){var t=a.props.tabs.state.curTab,n=r.a.createElement("span",null,e.name," \xa0",e.id===t&&r.a.createElement(g.a,{name:"times",style:{fontSize:"10px"},onClick:a.onRemoveTab}));return r.a.createElement(T.a,{key:"tab_".concat(e.id),eventKey:e.id,title:n,mountOnEnter:!0},r.a.createElement(ie,{tabId:e.id,layout:e.layout}))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.tabs,t=e.state.curTab;return r.a.createElement(S.a,{id:"tabs",className:"acTabs",activeKey:t,onSelect:this.onSelectTab},b.a.values(e.byId).map(this.createTab),r.a.createElement(T.a,{eventKey:-1,title:"+"}))}}]),t}(r.a.Component),se=Object(d.b)(function(e,t){return{tabs:e.tabs}})(le),ue=a(450),pe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).onSuccess=function(e){a.setState({loaded:!0,error:null})},a.onError=function(e){a.setState({loaded:!1,error:"Failed to load image"})},a.state={loaded:!1,error:null,data:null},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.appConfig,a=e.onCancel,n=t.api+"/utils/screenshot";return r.a.createElement(ue.a,{show:!0,animation:!0,onHide:a,dialogClassName:"acModelScreenshot"},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,"Screenshot")),r.a.createElement(ue.a.Body,null,!this.state.loaded&&null===this.state.error&&r.a.createElement(B.a,{variant:"info"},r.a.createElement("h4",null,"Taking Screenshot"),r.a.createElement("p",null,"Please wait ...")),!this.state.loaded&&null!=this.state.error&&r.a.createElement(B.a,{variant:"danger"},r.a.createElement("h4",null,"Failed"),r.a.createElement("p",null,this.state.error)),r.a.createElement("center",null,r.a.createElement("img",{alt:"screenshot",src:n,onLoad:this.onSuccess,onError:this.onError}))),r.a.createElement(ue.a.Footer,null,r.a.createElement(D.a,{variant:"success",onClick:a},"Close")))}}]),t}(r.a.Component),de=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.dialog,a=e.onCancel;return r.a.createElement(ue.a,{show:!0,size:"lg",onHide:a},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,t.title)),r.a.createElement(ue.a.Body,null,r.a.createElement("h4",null,t.question)),r.a.createElement(ue.a.Footer,null,r.a.createElement(D.a,{variant:"default",onClick:a},"Cancel"),r.a.createElement(D.a,{variant:"danger",onClick:function(){t.callback(t.data),a()}},"Confirm")))}}]),t}(r.a.Component),me=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).onChangeName=function(e){a.setState({name:e.target.value})},a.state={name:""},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dialog,n=t.onCancel,o=function(t){t.preventDefault(),""!==e.state.name&&a.callback(e.state),e.setState({name:""}),n()};return r.a.createElement(ue.a,{show:!0,onHide:n},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,"Create a New Tab")),r.a.createElement(ue.a.Body,null,r.a.createElement(q.a,{onSubmit:o},r.a.createElement(q.a.Group,{as:H.a,controlId:"formName"},r.a.createElement(q.a.Label,{column:!0,sm:"2"},"Name"),r.a.createElement(K.a,{sm:10},r.a.createElement(q.a.Control,{type:"text",value:this.state.name,onChange:this.onChangeName,autoFocus:!0}))))),r.a.createElement(ue.a.Footer,null,r.a.createElement(D.a,{variant:"default",onClick:n},"Cancel"),r.a.createElement(D.a,{variant:"success",onClick:o},"Create Tab")))}}]),t}(r.a.Component),he=a(94),fe={name:"",colour:"#004dcf",textColour:"white",showColours:!1},ge=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).onChangeName=function(e){a.setState({name:e.target.value})},a.onChangeColour=function(e){var t=e.hex in x.DARK_COLOURS?"white":"black";a.setState({colour:e.hex,textColour:t,showColours:!1})},a.onShowColours=function(e){a.setState({showColours:!a.state.showColours})},a.state=Object(h.a)({},fe),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dialog,n=t.onCancel,o=function(t){if(t.preventDefault(),""!==e.state.name){var r=b.a.omit(Object(h.a)({},e.state),"showColours");a.callback(r)}n()};return r.a.createElement(ue.a,{show:!0,onHide:n},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,"Add Panel")),r.a.createElement(ue.a.Body,null,r.a.createElement(q.a,{onSubmit:o},r.a.createElement(q.a.Group,{as:H.a,controlId:"formType"},r.a.createElement(q.a.Label,{column:!0,sm:"2"},"Name"),r.a.createElement(K.a,{sm:10},r.a.createElement(U.a,null,r.a.createElement(U.a.Prepend,null,r.a.createElement(U.a.Text,{style:{backgroundColor:this.state.colour},onClick:this.onShowColours},"\xa0")),r.a.createElement(q.a.Control,{type:"text",value:this.state.name,onChange:this.onChangeName,autoFocus:!0})))),this.state.showColours&&r.a.createElement(q.a.Group,null,r.a.createElement(K.a,{sm:{span:10,offset:2}},r.a.createElement(he.GithubPicker,{width:"215px",onChangeComplete:this.onChangeColour}))))),r.a.createElement(ue.a.Footer,null,r.a.createElement(D.a,{variant:"default",onClick:n},"Cancel"),r.a.createElement(D.a,{variant:"success",onClick:o},"Create Panel")))}}]),t}(r.a.Component),ye={name:"Widget Name",query:"/about",style:"Default",colour:"#004dcf",textColour:"white",log:!0,notify:!0,type:"Button",options:{},showColours:!1},be={screenshot:pe,confirm:de,addTab:me,addPanel:ge,addWidget:function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).onChangeName=function(e){return a.setState({name:e.target.value})},a.onChangeQuery=function(e){return a.setState({query:e.target.value})},a.onChangeLog=function(e){return a.setState({log:e.target.checked})},a.onChangeNotify=function(e){return a.setState({notify:e.target.checked})},a.onShowColours=function(e){return a.setState({showColours:!a.state.showColours})},a.onChangeType=function(e){return a.setState({type:e})},a.onChangeColour=function(e){var t=e.hex in x.DARK_COLOURS?"white":"black";a.setState({colour:e.hex,textColour:t,showColours:!1})},a.onOK=function(e){var t=a.props,n=t.dialog,r=t.onCancel;if(e.preventDefault(),""!==a.state.name){var o={};null!=a.refs&&null!=a.refs.options&&(o=a.refs.options.state);var c=b.a.omit(Object(h.a)({},a.state,{options:o}),"showColours");n.callback(c)}r()};var n=e.dialog;return a.state=Object(h.a)({},ye,n.widget),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.onCancel,a=X[this.state.type.toLowerCase()],n=a&&r.a.createElement(a,{ref:"options",options:this.state.options});return r.a.createElement(ue.a,{show:!0,onHide:t,size:"lg"},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,"Add ",this.state.type)),r.a.createElement(ue.a.Body,null,r.a.createElement(q.a,{onSubmit:this.onOK},r.a.createElement(q.a.Group,{as:H.a,controlId:"formType"},r.a.createElement(q.a.Label,{column:!0,sm:"2"},"Name"),r.a.createElement(K.a,{sm:10},r.a.createElement(U.a,null,r.a.createElement(U.a.Prepend,{style:{padding:"0px"}},r.a.createElement("div",{style:{backgroundColor:this.state.colour,width:"25px",height:"36px"},onClick:this.onShowColours},r.a.createElement("span",{style:{backgroundColor:this.state.colour,height:"100%",width:"100%"}}))),r.a.createElement(q.a.Control,{type:"text",value:this.state.name,onChange:this.onChangeName,autoFocus:!0}),r.a.createElement(V.a,{id:"formType",title:this.state.type},r.a.createElement(J.a.Item,{key:"1",onSelect:function(){return e.onChangeType("Button")}},"Button"),r.a.createElement(J.a.Item,{key:"2",onSelect:function(){return e.onChangeType("Link")}},"Link"),r.a.createElement(J.a.Item,{key:"3",onSelect:function(){return e.onChangeType("Table")}},"Table"))))),this.state.showColours&&r.a.createElement(q.a.Group,null,r.a.createElement(K.a,{sm:{offset:2,span:10}},r.a.createElement(he.GithubPicker,{width:"215px",onChangeComplete:this.onChangeColour}))),r.a.createElement(q.a.Group,{as:H.a},r.a.createElement(q.a.Label,{column:!0,sm:"2"},"Query"),r.a.createElement(K.a,{sm:10},r.a.createElement(q.a.Control,{type:"text",value:this.state.query,onChange:this.onChangeQuery}))),r.a.createElement(q.a.Group,{as:H.a},r.a.createElement(q.a.Label,{column:!0,sm:"2"},"Output"),r.a.createElement(K.a,{sm:10},r.a.createElement(q.a.Check,{type:"checkbox",label:"Copy results to output window",checked:this.state.log,onChange:this.onChangeLog}))),r.a.createElement(q.a.Group,{as:H.a},r.a.createElement(K.a,{sm:{offset:2,span:10}},r.a.createElement(q.a.Check,{type:"checkbox",label:"Display successful notification toast message",checked:this.state.notify,onChange:this.onChangeNotify}))),n)),r.a.createElement(ue.a.Footer,null,r.a.createElement(D.a,{variant:"default",onClick:this.props.onCancel},"Cancel"),r.a.createElement(D.a,{variant:"success",onClick:this.onOK},this.props.dialog.widget?"Update Widget":"Create Widget")))}}]),t}(r.a.Component)},Ee=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onCancel=function(){a.props.dispatch({type:"APP_DIALOG_CANCEL"})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.app,t=e.dialog,a=e.config;if(null===t||!(t.modal in be))return null;var o=be[t.modal],c=r.a.createElement(o,{onCancel:this.onCancel,dialog:t,appConfig:a});return r.a.createElement(n.Fragment,null,c)}}]),t}(r.a.Component),ve=Object(d.b)(function(e,t){return{app:e.app}})(Ee),Oe=a(51),Ce=a(448),je={capture:!0},ke=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onLock=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),a.setState({locked:!a.state.locked})},a.onClear=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),a.props.dispatch(L.a())},a.onConnect=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),a.props.dispatch(Oe.a())},a.onDisconnect=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),a.props.dispatch(Oe.b())},a.onUpdateQuery=function(e){a.setState({query:e.target.value.trim()})},a.onKeyDown=function(e){if("Enter"===e.key&&a.state.query){var t=a.props,n=t.dispatch,r=t.app.config.api,o=a.state.query,c=r+(o.startsWith("/")?"":"/")+o;_.a.get(c).then(function(e){return n(L.d(JSON.stringify(e.data,null,2)))}).catch(function(e){return n(L.b(e.toString()))})}},a.onToggle=function(e){a.height=a.height>10?0:250,a.refs.output.style.height=a.height+"px"},a.onMouseDown=function(e){document.body.style["pointer-events"]="none",document.addEventListener("mouseup",a.onMouseUp,je),document.addEventListener("mousemove",a.onMouseMove,je),e.preventDefault(),e.stopPropagation(),a.dragOrigin=e.screenY,a.dragTimestamp=Date.now()},a.onMouseMove=function(e){e.stopPropagation();var t=a.dragOrigin-e.screenY;a.dragOrigin=e.screenY,a.height=Math.max(a.height+t,0),a.refs.output.style.height=a.height+"px"},a.onMouseUp=function(e){document.body.style["pointer-events"]="auto",document.removeEventListener("mouseup",a.onMouseUp,je),document.removeEventListener("mousemove",a.onMouseMove,je),e.stopPropagation(),Date.now()-a.dragTimestamp<200&&a.onToggle()},a.state={locked:!1,query:""},a.dragOrigin=0,a.height=0,a.dragTimestamp=0,a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){if(!this.state.locked){var e=this.refs.outputContent;e.scrollTop=e.scrollHeight}}},{key:"render",value:function(){var e=this.props,t=e.output,a=e.app.connected,n=null;return n=t.length>0?b.a.map(t,function(e,t){return r.a.createElement("pre",{key:t,className:"text-"+e.type},"[",e.timestamp,"] ",e.text)}):"No output",r.a.createElement("div",{className:"acOutput"},r.a.createElement("div",{className:"acOutputTitle"},r.a.createElement("span",{style:{width:"110px"}},a?r.a.createElement(Ce.a,{variant:"success",onClick:this.onDisconnect},"Connected"):r.a.createElement(Ce.a,{variant:"success",onClick:this.onConnect},"Not Connected")),r.a.createElement("span",{onMouseDown:this.onMouseDown,onClick:this.onToggle,style:{width:"100%",marginLeft:"0.5em"}},"Output"),r.a.createElement("div",{style:{width:"60px"}},r.a.createElement(g.a,{name:"trash",onClick:this.onClear}),"\xa0",r.a.createElement(g.a,{className:this.state.locked?"text-danger":"text-info",name:this.state.locked?"lock":"unlock",onClick:this.onLock}),"\xa0")),r.a.createElement("div",{ref:"output",className:"acOutputContainer",style:{height:this.height+"px"}},r.a.createElement("div",{ref:"outputContent",className:"acOutputContent"},n),r.a.createElement(U.a,{className:"acOutputInput"},r.a.createElement(U.a.Prepend,null,r.a.createElement(U.a.Text,null,"Query")),r.a.createElement(q.a.Control,{type:"text",value:this.state.query,onChange:this.onUpdateQuery,onKeyDown:this.onKeyDown,placeholder:"q/scene/*.name",ref:"input"}))))}}]),t}(r.a.Component),we=Object(d.b)(function(e,t){return{app:e.app,output:e.output}})(ke),Te=a(29),Se=a(198),Ie=(a(437),document.location.host);var Ne={dialog:null,connected:!1,config:{api:document.location.protocol+"//"+Ie,ws:"ws://"+Ie+"/ws"}};var Ae=a(27);var Pe=Object(Te.c)({byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONFIG_IMPORT":return Object(h.a)({},t.payload.tabs.byId);case"TAB_CREATE":var a=t.payload,n=a.id,r=Object(h.a)({},a);return Object(h.a)({},e,Object(Ae.a)({},n,r));case"TAB_REMOVE":var o=t.payload.id;return b.a.omit(e,o);case"TAB_LAYOUT":var c=t.payload,i=c.id,l=c.layout;if(i in e){var s=Object(h.a)({},e[i],{layout:l});return Object(h.a)({},e,Object(Ae.a)({},i,s))}}return e},state:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{curTab:1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONFIG_IMPORT":return Object(h.a)({},t.payload.tabs.state);case"TAB_CREATE":case"TAB_SELECT":var a=t.payload.id;return Object(h.a)({},e,{curTab:a});case"TAB_REMOVE":var n=t.payload.showTab;return Object(h.a)({},e,{curTab:n})}return e}}),_e=a(98);var xe=Object(Te.c)({byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONFIG_IMPORT":return Object(h.a)({},t.payload.panels.byId);case"PANEL_CREATE":var a=t.payload,n=a.id,r=Object(h.a)({},a,{widgets:[]});return Object(h.a)({},e,Object(Ae.a)({},n,r));case"PANEL_REMOVE":var o=t.payload.id;return b.a.omit(e,o);case"TAB_REMOVE":var c=t.payload.id;return b.a.omitBy(e,function(e){return e.tab===c});case"WIDGET_CREATE":var i=t.payload,l=i.panel;if(l in e){var s=e[l],u=Object(_e.a)(s.widgets);b.a.find(u,function(e){return e===i.id})||u.push(i.id);var p=Object(h.a)({},s,{widgets:u});return Object(h.a)({},e,Object(Ae.a)({},l,p))}console.warn("Can't find panel "+i.panel);break;case"WIDGET_REMOVE":var d=t.payload,m=d.id,f=d.panel;if(f in e){var g=e[f],y=b.a.reject(g.widgets,function(e){return e===m});return Object(h.a)({},e,Object(Ae.a)({},f,Object(h.a)({},g,{widgets:y})))}console.warn("Can't find panel "+f);break;case"WIDGET_MOVE":console.log(t.payload);var E=t.payload,v=E.id,O=E.dragIndex,C=E.hoverIndex,j=e[v],k=j.widgets[O],w=[].concat(Object(_e.a)(j.widgets.slice(0,O)),Object(_e.a)(j.widgets.slice(O+1)));return w.splice(C,0,k),Object(h.a)({},e,Object(Ae.a)({},v,Object(h.a)({},j,{widgets:w})))}return e},state:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP_PANEL_STATE":return Object(h.a)({},e,t.payload)}return e}});var De=Object(Te.c)({byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONFIG_IMPORT":return Object(h.a)({},t.payload.widgets.byId);case"WIDGET_CREATE":var a=t.payload,n=a.id,r=Object(h.a)({},a);return Object(h.a)({},e,Object(Ae.a)({},n,r));case"WIDGET_REMOVE":var o=t.payload.id;return b.a.omit(e,o);case"PANEL_REMOVE":var c=t.payload.id;return b.a.omitBy(e,function(e){return e.panel===c});case"TAB_REMOVE":var i=t.payload.id;return b.a.omitBy(e,function(e){return e.tab===i});default:return e}}}),Le=a(199),Ge=a.n(Le),We=a(200),Re=function(){function e(t){var a=this;Object(i.a)(this,e),this.socket=null,this.store=null,this.onOpen=function(){var e=a.store;return function(){return e.dispatch(Oe.d(!0))}},this.onClose=function(){var e=a.store;return function(){return e.dispatch(Oe.d(!1))}},this.onMessage=function(){var e=a.store;return function(t){var a=JSON.parse(t.data);e.dispatch({type:"SOCK_"+a.id.toUpperCase(),payload:a})}},this.onError=function(){var e=a.store;return function(t){e.dispatch(L.b("Failed to connect to game"))}},this.store=t}return Object(l.a)(e,[{key:"connect",value:function(){this.disconnect();var e=this.store.getState().app.config;this.socket=new WebSocket(e.ws),this.socket.onopen=this.onOpen(),this.socket.onclose=this.onClose(),this.socket.onerror=this.onError(),this.socket.onmessage=this.onMessage()}},{key:"disconnect",value:function(){null!==this.socket&&this.socket.close(),this.socket=null}},{key:"send",value:function(e){this.socket.send(JSON.stringify(e))}}]),e}();var Be=function(){var e=null;return function(t){return function(a){return function(n){switch(n.type){case"CON_CONNECT":null===e&&(e=new Re(t)),e.connect();break;case"CON_DISCONNECT":null!==e&&e.disconnect();break;case"CON_SEND":null!==e&&e.send(n.payload);break;default:return a(n)}}}}}(),Me={app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONFIG_IMPORT":case"APP_CONFIG":return Object(h.a)({},e);case"CON_CONNECTED":return Object(h.a)({},e,{connected:t.payload});case"APP_DAILOG_SHOW":return Object(h.a)({},e,{dialog:t.payload});case"APP_DIALOG_CANCEL":return Object(h.a)({},e,{dialog:null})}return e},tabs:Pe,panels:xe,widgets:De,output:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_CLEAR":return[];case"LOG":var a=t.payload,n=Object(h.a)({},a,{timestamp:Ge()().format("HH:mm:ss.SS")}),r=e.slice();return r.push(n),r}return e}},Fe=[Se.a,We.a,Be];var qe=Object(Te.d)(Object(Te.c)(Me),{},Te.a.apply(void 0,Fe)),He=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,{store:qe},r.a.createElement("div",null,r.a.createElement(w,null),r.a.createElement(se,null),r.a.createElement(we,null),r.a.createElement(ve,null),r.a.createElement(m.a,{position:"bottom-right",autoClose:3e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,pauseOnHover:!0})))}}]),t}(r.a.Component);qe.dispatch({type:"APP_LOAD"}),c.a.render(r.a.createElement(He,null),document.getElementById("root"))},51:function(e,t,a){"use strict";function n(){return{type:"CON_CONNECT"}}function r(){return{type:"CON_DISCONNECT"}}function o(e){return{type:"CON_CONNECTED",payload:e}}function c(e,t){return{type:"CON_SEND",payload:{id:e,q:t}}}a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r}),a.d(t,"d",function(){return o}),a.d(t,"c",function(){return c})}},[[206,1,2]]]);
//# sourceMappingURL=main.f1794c8b.chunk.js.map