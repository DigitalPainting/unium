(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(23),o=a.n(l),c=a(6),i=a(5),s=a(8),u=a(7),m=a(24),h=a(9),p=(a(62),a(63),a(106)),d=a(107),f=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement(p.a,null,r.a.createElement("h1",null,"Unium Tutorial"),r.a.createElement("p",null,"Welcome to the Unium Tutorial. This will introduce you to key ideas and show how you might be able to start using it on your own projects."),r.a.createElement("p",null,"This is an interactive tutorial that uses the tutorial scene. If the browser opened automatically when you ran the scene then it is all good. If not, please ensure the tutorial scene is running in the editor."),r.a.createElement("p",null,r.a.createElement(d.a,{variant:"primary",onClick:function(){return e.props.setPage(1)}},"Begin"))))}}]),t}(r.a.Component),g=a(110),b=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(g.a,{bg:"light",expand:"lg"},r.a.createElement(g.a.Brand,null,"Unium Tutorial"))}}]),t}(n.Component),v=a(56),E=a(112),y=a(113),k=a(28),O=a.n(k),j=a(108),w=a(109),T=a(114),P=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={output:""},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"onTryNow",value:function(){var e=this;O.a.get(this.props.url).then(function(t){t.data?e.setState({output:e.props.message+"\n\n"+JSON.stringify(t.data,null,2)}):e.setState({output:"Hmm, something's not right! This is what we got back ...\n\n"+JSON.stringify(t,null,2)})}).catch(function(t){e.setState({output:"Oops, something went wrong!\nIs the game running the tutorial scene?\n\n"+t})})}},{key:"onOpen",value:function(){window.open(this.props.url,"_blank")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{paddingTop:"20px",width:"80%",margin:"0 auto"}},r.a.createElement(j.a,null,r.a.createElement(w.a,null,r.a.createElement(T.a,{value:this.props.url,readOnly:!0}),r.a.createElement(w.a.Append,null,r.a.createElement(d.a,{variant:"info",onClick:function(){return e.onOpen()}},">>")))),r.a.createElement(d.a,{variant:"info",onClick:function(){return e.onTryNow()}},"Try Now"),r.a.createElement("div",{style:{marginTop:"20px"}},r.a.createElement("h4",null,"Output"),r.a.createElement("pre",{style:{height:"24em"}},this.state.output)))}}]),t}(r.a.Component),S=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Unium is an experimental library for the purposes of facilitating automated testing and tool development for your Unity games."),r.a.createElement("p",null,"The main idea is twofold. Firstly, embed a web server into your project to provide an interface onto the game. Secondly, implement a query language that to some degree takes care of the tedious bits."),r.a.createElement("p",null,"The advantages of a web server is that HTTP provides a technology agnostic protocol that places no restrictions on whatever tools and frameworks you wish to use. It also means it will work whether the game is running in editor, on device or on some headless server in the clouds."),r.a.createElement("p",null,"Check the tutorial scene is running by clicking ",r.a.createElement("b",null,r.a.createElement("i",null,"Try Now"))," below to fetch some basic information about the game, or alternatively copy the url into your browser."),r.a.createElement(P,{url:"http://localhost:8342/about",message:"It works! The game returned us some data ..."}))}}]),t}(r.a.Component),q=a(52),x=a.n(q),C=a(111),F=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={hasImage:!1,error:null,imageData:null},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"screenshot",value:function(){var e=this;O.a.get(t.url,{responseType:"blob"}).then(function(t){var a=new window.FileReader;a.readAsDataURL(t.data),a.onload=function(){e.setState({hasImage:!0,imageData:a.result,error:null})},a.onerror=function(t){e.setState({error:t.toString()})}}).catch(function(t){e.setState({error:t.toString()})})}},{key:"onOpen",value:function(){window.open(t.url,"_blank")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("p",null,"Routes map incoming requests to associated handling routines by their URL (or partial URL). You can register your own routes for custom actions."),r.a.createElement("p",null,"The default routes along with the other configuration can be found in the Unium.cs file. The route handler for the 'about' route from the first example looks like this."),r.a.createElement("center",null,r.a.createElement(x.a,{mode:"csharp",theme:"textmate",editorProps:{$blockScrolling:!0},readOnly:!0,value:t.code,fontSize:14,height:"280px",width:"80%",showPrintMargin:!1,showGutter:!0,highlightActiveLine:!0})),r.a.createElement("hr",null),r.a.createElement("p",{style:{marginTop:"20px"}},"Handlers can return any kind of data, for example they can be used to take a screenshot."),r.a.createElement("div",{style:{padding:"3em"}},r.a.createElement(j.a,null,r.a.createElement(w.a,null,r.a.createElement(T.a,{value:t.url,readOnly:!0}),r.a.createElement(w.a.Append,null,r.a.createElement(d.a,{variant:"info",onClick:function(){return e.onOpen()}},">>")))),r.a.createElement(d.a,{variant:"info",onClick:function(){return e.screenshot()}},"Take screenshot"),this.state.hasImage&&r.a.createElement("center",{style:{marginTop:"3em"}},r.a.createElement("img",{src:this.state.imageData,alt:"screenshot",width:"80%"})),this.state.error&&r.a.createElement(C.a,{variant:"danger"},r.a.createElement("h4",null,"Oops! Something went wrong :/"),r.a.createElement("p",null,this.state.error))))}}]),t}(r.a.Component);F.url="http://localhost:8342/utils/screenshot",F.code='// register the about handler route\nRoutesHTTP.Add( "/about", HandlerUtils.HandlerAbout );\n  \n// The handler is just a function that responds with some data.\n// In this case it reflects some JSON data about the game.\n\npublic static void HandlerAbout( RequestAdapter req, string path )\n{\n    req.Respond( JsonReflector.Reflect( new {\n        Unium = Unium.Version.ToString( 2 ),\n        Unity = Application.unityVersion,\n        Mono  = Environment.Version.ToString(),\n        ...\n    }));\n}\n';var N=a(115);var R=[r.a.createFactory(function(){return r.a.createElement("div",null,r.a.createElement("p",null,"GQL (Game Query Language) is an XPath-like query language that lets you retrieve data from the game, set variables and invoke functions."),r.a.createElement("p",null,"It is available on a special route called ",r.a.createElement("b",null,"/q")," and operates on a custom tree data structure. The most important node in this tree is the scene."),r.a.createElement("p",null,"The query selects all the objects in the tree that match that path and returns an array of the results (in JSON format). This may be an empty array if no objects match or there is an error executing the query."),r.a.createElement("p",null,"Use the numbers above to step through different GQL examples."),r.a.createElement(P,{url:"http://localhost:8342/q/scene/Game/Player",message:"The game returned the player game object ..."}))}),r.a.createFactory(function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Properties can be selected with dot notation. To get the player position ..."),r.a.createElement(P,{url:"http://localhost:8342/q/scene/Game/Player.Transform.position",message:"The player position ..."}))}),r.a.createFactory(function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Paths can matches multiple objects. To get all the position of all the pickups ..."),r.a.createElement(P,{url:"http://localhost:8342/q/scene/Game/Pickup.Transform.position",message:"The positions of all game objects called Pickup"}))}),r.a.createFactory(function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Wildcards match partial object names. To get all the names of all child objects of Game starting with P ..."),r.a.createElement(P,{url:"http://localhost:8342/q/scene/Game/P*.name",message:"All objects with names matching P*"}))}),r.a.createFactory(function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Square brackets [] are used to filter objects based on an expression. If the expression evaluates to an integer it will be treated as an index into a list, otherwise it will filter the list based on the \u201ctruth\u201d of the expression."),r.a.createElement("p",null,"Find all the pickups and return the 3rd one from the list ..."),r.a.createElement(P,{url:"http://localhost:8342/q/scene/Game/Pickup[2].Transform.position",message:"The position of the 3rd pickup"}))}),r.a.createFactory(function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Or filter the results. Find all the pickups whose x position is greater than or equal to 0 and return the position:"),r.a.createElement(P,{url:"http://localhost:8342/q/scene/Game/Pickup.Transform.position[x>=0]",message:"The positions of all the pickups with x >= 0"}))}),r.a.createFactory(function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Find all the pickups whose x position is greater than or equal to 0 and return the RotateSpeed."),r.a.createElement(P,{url:"http://localhost:8342/q/scene/Game/Pickup[Transform.position.x>=0].Pickup.RotateSpeed",message:"Rotate speeds of all pickups with x >= 0 ..."}))}),r.a.createFactory(function(){return r.a.createElement("div",null,r.a.createElement("p",null,"You can use // to recursively search all child nodes (from the current node)"),r.a.createElement("p",null,"Find all the pickups in the scene (find by name)"),r.a.createElement(P,{url:"http://localhost:8342/q/scene//Pickup",message:"All the Pickups in the scene"}))}),r.a.createFactory(function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Or, find all the game objects with the Pickup tag"),r.a.createElement(P,{url:"http://localhost:8342/q/scene//[tag='Pickup']",message:"All the objects tagged as a Pickup"}))}),r.a.createFactory(function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Or, by combining the recursive search with a wildcard you can find objects with specific components."),r.a.createElement(P,{url:"http://localhost:8342/q/scene//*.Pickup.RotateSpeed",message:"The rotate speeds of all the Pickup components"}))})],L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={activePage:0},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"onSelect",value:function(e){this.setState({activePage:e})}},{key:"render",value:function(){var e=this,t=R.length,a=this.state.activePage,n=Array.from({length:t},function(t,n){return r.a.createElement(N.a.Item,{key:"page_".concat(n),active:n===a,onClick:function(){return e.onSelect(n)}},n+1)});return r.a.createElement("div",null,r.a.createElement(N.a,null,r.a.createElement(N.a.Prev,{disabled:0===a,onClick:function(){return e.onSelect(a-1)}}),n,r.a.createElement(N.a.Next,{disabled:a===t-1,onClick:function(){return e.onSelect(a+1)}})),R[a]())}}]),t}(r.a.Component);var I=[r.a.createFactory(function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Queries can also change values or invoke functions on the selected objects."),r.a.createElement("p",null,"For example, to change the rotate speed of all the pick ups."),r.a.createElement(P,{url:"http://localhost:8342/q/scene//Pickup.Pickup.RotateSpeed=5",message:"Note the query returns the new values"}))}),r.a.createFactory(function(){return r.a.createElement("div",null,r.a.createElement("p",null,"You can also pass Vector3 values."),r.a.createElement("p",null,"To teleport the player to the origin ..."),r.a.createElement(P,{url:"http://localhost:8342/q/scene//Player.Transform.position={'x':0,'y':0,'z':0}",message:"Note the query returns the new values"}))}),r.a.createFactory(function(){return r.a.createElement("div",null,r.a.createElement("p",null,"You can also call functions."),r.a.createElement("p",null,"To call the MoveTo() function on the player ..."),r.a.createElement(P,{url:"http://localhost:8342/q/scene//Player.Player.MoveTo({'x':12,'y':1,'z':-28})",message:"Note the query returns the new values"}))})],A=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={activePage:0},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"onSelect",value:function(e){this.setState({activePage:e})}},{key:"render",value:function(){var e=this,t=I.length,a=this.state.activePage,n=Array.from({length:t},function(t,n){return r.a.createElement(N.a.Item,{key:"page_".concat(n),active:n===a,onClick:function(){return e.onSelect(n)}},n+1)});return r.a.createElement("div",null,r.a.createElement(N.a,null,r.a.createElement(N.a.Prev,{disabled:0===a,onClick:function(){return e.onSelect(a-1)}}),n,r.a.createElement(N.a.Next,{disabled:a===t-1,onClick:function(){return e.onSelect(a+1)}})),I[a]())}}]),t}(r.a.Component),G=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={ws:null},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"Log",value:function(e){var t=document.getElementById("output");t&&(t.innerHTML+=e+"\n")}}]),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=document.getElementById("output");e&&(e.innerHTML="")}},{key:"componentWillUnmount",value:function(){this.state.ws&&this.state.ws.close()}},{key:"send",value:function(e){e=JSON.stringify(e),this.Log("Sending : "+e),this.state.ws.send(e)}},{key:"connect",value:function(){var e=this,t=new WebSocket("ws://localhost:8342/ws");return t.onerror=function(){e.Log("Error connecting to game - is it running?")},t.onclose=function(){e.Log("Connection closed")},t.onmessage=function(t){e.Log("Received: "+t.data)},this.setState({ws:t}),t}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(d.a,{variant:"info",onClick:function(){return e.Run()}},"Try Now"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("pre",{id:"output"}))}}]),t}(r.a.Component),U=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"Run",value:function(){var e=this,t=this.connect();t.onopen=function(){e.Log("Connected to game"),e.send({id:"some_id",q:"/about"})},t.onmessage=function(a){e.Log("Received: "+a.data),t.close()}}}]),t}(G);var _=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"Run",value:function(){var e=this;this.connect().onopen=function(){e.Log("Connected to game"),e.send({id:"fps",q:"/q/stats.FPS",repeat:{freq:1}})}}}]),t}(G);var H=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"Run",value:function(){var e=this,t=this.connect();t.onopen=function(){e.Log("Connected to game"),e.send({id:"debug",q:"/bind/events.debug"})},t.onmessage=function(a){e.Log("Recieved: "+a.data);var n=JSON.parse(a.data);n.info?e.send({id:"hello",q:"/q/scene/Game.Tutorial.SayHello()"}):n.data&&"hello"===n.id&&t.close()}}}]),t}(G);var J=[r.a.createFactory(function(){return r.a.createElement("div",null,r.a.createElement("p",null,"The RESTful interface is convenient but there are a couple of things it is not suitable for. Specifically, watching variables change over time and getting notifications about in-game events. This is where the web socket interface comes in."),r.a.createElement("p",null,"Unium has a simple JSON message format. Queries are passed along with an (optional) id in this format:"),r.a.createElement("pre",null,'{ id: "<message id>", q: "</query>" }'),r.a.createElement("p",null,"A reply is of the form"),r.a.createElement("pre",null,'{  id: "<message id>", data: ... }'),r.a.createElement("p",null,"Or"),r.a.createElement("pre",null,'{ id: "<message id>", error: ... }'),r.a.createElement("p",{style:{marginTop:"50px"}},"To see the about query in action click the button below."),r.a.createElement(U,null))}),r.a.createFactory(function(){return r.a.createElement("div",null,r.a.createElement("p",null,'Watching variables is done with "repeaters". Repeaters repeat the query at a given period to \u201csample\u201d the results.'),r.a.createElement("p",null,"For example, to sample the framerate every second we send ..."),r.a.createElement("pre",null,'{ id: "fps", q:"/q/stats.FPS", repeat:{ freq: 1 } }'),r.a.createElement(_,null))}),r.a.createFactory(function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Unium can \u201cbind\u201d to any C# event with a delegate type of Action<object> that is accessible in the GQL tree using the /bind route."),r.a.createElement("p",null,"Any events that fire will have the same message id as the bound event. If the query successfully bound to an event it will return an 'info' message of the form below before any events are sent (otherwise an error message)."),r.a.createElement("pre",null,'{ id: "<message id>", info:"bound" }'),r.a.createElement("p",null,"For example, to get the debug output ..."),r.a.createElement(H,null))})],M=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={activePage:0},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"onSelect",value:function(e){this.setState({activePage:e})}},{key:"render",value:function(){var e=this,t=J.length,a=this.state.activePage,n=Array.from({length:t},function(t,n){return r.a.createElement(N.a.Item,{key:"page_".concat(n),active:n===a,onClick:function(){return e.onSelect(n)}},n+1)});return r.a.createElement("div",null,r.a.createElement(N.a,null,r.a.createElement(N.a.Prev,{disabled:0===a,onClick:function(){return e.onSelect(a-1)}}),n,r.a.createElement(N.a.Next,{disabled:a===t-1,onClick:function(){return e.onSelect(a+1)}})),J[a]())}}]),t}(r.a.Component),Q=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Here are some simplfied examples that put it all together"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"debug_output.html",target:"_blank"},"Debug Output")),r.a.createElement("li",null,r.a.createElement("a",{href:"fps_graph.html",target:"_blank"},"FPS Graph")),r.a.createElement("li",null,r.a.createElement("a",{href:"automated_play.html",target:"_blank"},"Automated Playthrough")),r.a.createElement("li",null,r.a.createElement("a",{href:"sockets.html",target:"_blank"},"Socket Explorer")),r.a.createElement("li",null,r.a.createElement("a",{href:"../index.html",target:"_blank"},"Debug Menu"))))}}]),t}(r.a.Component),D=[{name:"Intro",component:null},{name:"Web Server",component:r.a.createFactory(S)},{name:"Routes",component:r.a.createFactory(F)},{name:"GQL Queries",component:r.a.createFactory(L)},{name:"GQL Actions",component:r.a.createFactory(A)},{name:"WebSockets",component:r.a.createFactory(M)},{name:"Examples",component:r.a.createFactory(Q)}],W=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"MenuItem",value:function(e,t){var a=this;return r.a.createElement(v.a,{key:t,onClick:function(){return a.props.setPage(t)},active:0===t,variant:t===this.props.page?"success":null},e)}},{key:"Next",value:function(){this.props.setPage(this.props.page+1)}},{key:"render",value:function(){var e=this,t=D[this.props.page];return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-2"},r.a.createElement(E.a,null,D.map(function(t,a){return e.MenuItem(t.name,a)}))),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement(y.a,{header:t.name,variant:"primary"},r.a.createElement(y.a.Body,null,t.component(this.props),this.props.page!==D.length-1&&r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement(d.a,{className:"pull-right",variant:"success",onClick:function(){return e.Next()}},"Next")))))))}}]),t}(r.a.Component),B=(a(100),a(101),a(102),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={page:0},a.setPage=a.setPage.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"setPage",value:function(e){this.setState({page:e})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(b,null),r.a.createElement("div",{className:"container-fluid"},0===this.state.page?r.a.createElement(f,{setPage:this.setPage}):r.a.createElement(W,{page:this.state.page,setPage:this.setPage})))}}]),t}(r.a.Component));o.a.render(r.a.createElement(B,null),document.getElementById("root"))},57:function(e,t,a){e.exports=a(104)},63:function(e,t,a){}},[[57,1,2]]]);
//# sourceMappingURL=main.17a87ff2.chunk.js.map